---
title: mtr-检测网络
permalink: /lpo/network/mtr
key: network-mtr
layout: article
sidebar:
  nav: lpo
aside:
  toc: true
---

mtr 全称 my traceroute，是一个把 ping 和 traceroute 合并到一个程序的网络诊断工具。
我们可以用来检测购买的国外服务器，在国内主机访问的速度是否很慢，这样我们就可以根据报告选择哪个机房更合适，比如一般选择`香港`，`新加坡`或`日本`。

<!--more-->

```shell
✗ sudo mtr --report google.com
Start: Tue Jun 23 23:05:49 2020
HOST: cjipv6.local                Loss%   Snt   Last   Avg  Best  Wrst StDev
  1.|-- ???                       100.0    10    0.0   0.0   0.0   0.0   0.0
  2.|-- 192.168.1.1                0.0%    10    4.7  17.3   4.7 118.6  35.6
  3.|-- 10.16.25.76                0.0%    10   15.0  14.2  10.6  21.6   3.6
  4.|-- 10.16.25.65                0.0%    10   17.6  30.1  17.4 111.4  29.0
  5.|-- 10.16.209.154              0.0%    10  113.9  81.6  18.7 164.9  56.8
  6.|-- 10.16.208.82               0.0%    10   19.6  42.4  18.6 166.9  47.9
  7.|-- 15169.hkg.equinix.com      0.0%    10   19.1  40.2  18.3 139.5  41.4
  8.|-- 108.170.241.1              0.0%    10   22.2  36.2  18.6 162.2  44.6
  9.|-- 72.14.233.169              0.0%    10   19.0  26.0  18.6  82.2  19.8
 10.|-- hkg07s22-in-f110.1e100.ne  0.0%    10   18.8  62.0  17.5 317.9  98.4
```

- 第一列是 IP 地址
- 丢包率：Loss
- 已发送的包数：Snt
- 最后一个包的延时：Last
- 平均延时：Avg
- 最低延时：Best
- 最差延时：Wrst
- 方差（稳定性）：StDev

如果看到最后一跳有丢包，要从后往前找是哪几条有问题
如果中间有丢包，但是后面又没丢包，说明是人为做了限制
如果延时高，观察是从哪一跳开始变高
